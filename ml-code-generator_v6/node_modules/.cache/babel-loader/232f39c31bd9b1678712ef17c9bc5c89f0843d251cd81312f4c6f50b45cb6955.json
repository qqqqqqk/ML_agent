{"ast":null,"code":"var _jsxFileName = \"d:\\\\University\\\\Group\\\\ml-code-generator_v5\\\\ml-code-generator_v5\\\\src\\\\components\\\\DatasetPanel.jsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { uploadDataset, getDatasetPreview } from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DatasetPanel = ({\n  datasetFiles,\n  setDatasetFiles,\n  selectedFile,\n  setSelectedFile\n}) => {\n  _s();\n  const [filePreview, setFilePreview] = React.useState(null);\n  const [filePreviewMap, setFilePreviewMap] = React.useState({});\n  const [uploadType, setUploadType] = React.useState('file');\n  const [isUploading, setIsUploading] = React.useState(false);\n\n  // 处理文件上传\n  const handleFileChange = async e => {\n    const files = Array.from(e.target.files);\n    const allowedExts = ['CSV', 'TXT', 'JSON', 'MD'];\n    const filteredFiles = files.filter(file => {\n      const ext = file.name.split('.').pop().toUpperCase();\n      return allowedExts.includes(ext);\n    });\n    if (filteredFiles.length === 0) return;\n    setIsUploading(true);\n    try {\n      const uploadedFiles = [];\n      for (const file of filteredFiles) {\n        const localAnalysisMetadata = await analyzeFileContent(file);\n        const serverFile = await uploadDataset(file, {\n          type: 'training',\n          description: `Uploaded on ${new Date().toLocaleString()}`,\n          userId: 'user123',\n          metadata: {\n            rowCount: localAnalysisMetadata.rows,\n            columnCount: localAnalysisMetadata.columns,\n            features: localAnalysisMetadata.previewData.length > 0 ? Object.keys(localAnalysisMetadata.previewData[0]) : []\n          }\n        });\n        uploadedFiles.push(serverFile);\n      }\n      setDatasetFiles(uploadedFiles);\n      if (uploadedFiles.length > 0) {\n        handleFileSelect(uploadedFiles[uploadedFiles.length - 1]);\n      }\n    } catch (error) {\n      alert('File upload failed: ' + error.message);\n    } finally {\n      setIsUploading(false);\n    }\n  };\n\n  // 分析单个文件内容\n  const analyzeFileContent = async (file, callback) => {\n    const sizeInBytes = file.fileSize || file.size;\n    let sizeStr = '';\n    if (sizeInBytes < 1024) sizeStr = sizeInBytes + ' B';else if (sizeInBytes < 1024 * 1024) sizeStr = (sizeInBytes / 1024).toFixed(2) + ' KB';else if (sizeInBytes < 1024 * 1024 * 1024) sizeStr = (sizeInBytes / (1024 * 1024)).toFixed(2) + ' MB';else sizeStr = (sizeInBytes / (1024 * 1024 * 1024)).toFixed(2) + ' GB';\n    const fileInfo = {\n      name: file.name,\n      size: sizeStr,\n      format: file.name.split('.').pop().toUpperCase(),\n      updateTime: new Date().toLocaleString()\n    };\n    if (file.filePath) {\n      try {\n        const previewResult = await getDatasetPreview(file._id);\n        const {\n          headers,\n          data: previewData,\n          totalRows\n        } = previewResult;\n        const result = {\n          ...fileInfo,\n          rows: totalRows,\n          columns: headers.length,\n          missingRatio: 'N/A',\n          previewData: previewData\n        };\n        if (callback) callback(result);\n        return result;\n      } catch (error) {\n        var _file$metadata, _file$metadata2;\n        const result = {\n          ...fileInfo,\n          rows: ((_file$metadata = file.metadata) === null || _file$metadata === void 0 ? void 0 : _file$metadata.rowCount) || 0,\n          columns: ((_file$metadata2 = file.metadata) === null || _file$metadata2 === void 0 ? void 0 : _file$metadata2.columnCount) || 0,\n          missingRatio: '0%',\n          previewData: []\n        };\n        if (callback) callback(result);\n        return result;\n      }\n    }\n    return new Promise(resolve => {\n      const reader = new FileReader();\n      reader.onload = e => {\n        const content = e.target.result;\n        const previewData = parseContentToPreview(content, fileInfo.format);\n        const rows = previewData.length;\n        const columns = previewData.length > 0 ? Object.keys(previewData[0]).length : 0;\n        let missingCount = 0;\n        let totalCount = 0;\n        previewData.forEach(row => {\n          Object.values(row).forEach(value => {\n            totalCount++;\n            if (!value) missingCount++;\n          });\n        });\n        const missingRatio = totalCount > 0 ? `${(missingCount / totalCount * 100).toFixed(2)}%` : '0%';\n        const result = {\n          ...fileInfo,\n          rows,\n          columns,\n          missingRatio,\n          previewData\n        };\n        if (callback) callback(result);\n        resolve(result);\n      };\n      reader.onerror = () => {\n        const result = {\n          ...fileInfo,\n          rows: 0,\n          columns: 0,\n          missingRatio: '0%',\n          previewData: []\n        };\n        if (callback) callback(result);\n        resolve(result);\n      };\n      reader.readAsText(file);\n    });\n  };\n\n  // 解析内容为预览\n  const parseContentToPreview = (content, format) => {\n    if (format === 'CSV') {\n      const lines = content.split(/\\r?\\n/).filter(line => line.trim() !== '');\n      if (lines.length < 2) return [];\n      const headers = lines[0].split(',').map(h => h.trim());\n      return lines.slice(1).map(line => {\n        const values = line.split(',');\n        const row = {};\n        headers.forEach((h, i) => {\n          row[h] = values[i];\n        });\n        return row;\n      });\n    }\n    // 可扩展支持JSON等\n    return [];\n  };\n\n  // 选择文件\n  const handleFileSelect = file => {\n    setSelectedFile(file);\n    if (file) {\n      analyzeFileContent(file, setFilePreview);\n    } else {\n      setFilePreview(null);\n    }\n  };\n\n  // 删除数据集\n  const handleDeleteDataset = fileId => {\n    const updatedDatasets = datasetFiles.filter(d => d._id !== fileId);\n    setDatasetFiles(updatedDatasets);\n    if (selectedFile && selectedFile._id === fileId) {\n      setSelectedFile(null);\n      setFilePreview(null);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: 18\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"\\u6570\\u636E\\u96C6\\u7BA1\\u7406\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      multiple: true,\n      accept: \".csv,.txt,.json,.md\",\n      onChange: handleFileChange,\n      style: {\n        marginBottom: 12\n      },\n      disabled: isUploading\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }, this), datasetFiles.length > 0 && /*#__PURE__*/_jsxDEV(\"select\", {\n      onChange: e => handleFileSelect(datasetFiles[e.target.value]),\n      style: {\n        marginBottom: 12\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"\",\n        children: \"\\u9009\\u62E9\\u5DF2\\u4E0A\\u4F20\\u6587\\u4EF6\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 11\n      }, this), datasetFiles.map((file, idx) => /*#__PURE__*/_jsxDEV(\"option\", {\n        value: idx,\n        children: file.name\n      }, file._id || file.name, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 13\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 9\n    }, this), filePreview && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 18\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: [\"\\u6587\\u4EF6\\u9884\\u89C8\\uFF1A\", filePreview.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"\\u5927\\u5C0F: \", filePreview.size]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"\\u683C\\u5F0F: \", filePreview.format]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"\\u884C\\u6570: \", filePreview.rows]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"\\u5217\\u6570: \", filePreview.columns]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"\\u66F4\\u65B0\\u65F6\\u95F4: \", filePreview.updateTime]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"\\u7F3A\\u5931\\u503C\\u6BD4\\u4F8B: \", filePreview.missingRatio]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n        style: {\n          marginTop: 12,\n          width: '100%',\n          background: '#f8f8f8',\n          borderRadius: 6\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: filePreview.previewData && filePreview.previewData.length > 0 && Object.keys(filePreview.previewData[0]).map(key => /*#__PURE__*/_jsxDEV(\"th\", {\n              children: key\n            }, key, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: filePreview.previewData && filePreview.previewData.length > 0 ? filePreview.previewData.map((row, idx) => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: Object.keys(filePreview.previewData[0]).map(key => /*#__PURE__*/_jsxDEV(\"td\", {\n              children: row[key]\n            }, key, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 21\n            }, this))\n          }, idx, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 17\n          }, this)) : /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: /*#__PURE__*/_jsxDEV(\"td\", {\n              colSpan: 10,\n              style: {\n                textAlign: 'center',\n                color: '#aaa'\n              },\n              children: \"No data\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 165,\n    columnNumber: 5\n  }, this);\n};\n_s(DatasetPanel, \"1++gdoMflEquutEjH56YUwwAUX8=\");\n_c = DatasetPanel;\nexport default DatasetPanel;\nvar _c;\n$RefreshReg$(_c, \"DatasetPanel\");","map":{"version":3,"names":["React","uploadDataset","getDatasetPreview","jsxDEV","_jsxDEV","DatasetPanel","datasetFiles","setDatasetFiles","selectedFile","setSelectedFile","_s","filePreview","setFilePreview","useState","filePreviewMap","setFilePreviewMap","uploadType","setUploadType","isUploading","setIsUploading","handleFileChange","e","files","Array","from","target","allowedExts","filteredFiles","filter","file","ext","name","split","pop","toUpperCase","includes","length","uploadedFiles","localAnalysisMetadata","analyzeFileContent","serverFile","type","description","Date","toLocaleString","userId","metadata","rowCount","rows","columnCount","columns","features","previewData","Object","keys","push","handleFileSelect","error","alert","message","callback","sizeInBytes","fileSize","size","sizeStr","toFixed","fileInfo","format","updateTime","filePath","previewResult","_id","headers","data","totalRows","result","missingRatio","_file$metadata","_file$metadata2","Promise","resolve","reader","FileReader","onload","content","parseContentToPreview","missingCount","totalCount","forEach","row","values","value","onerror","readAsText","lines","line","trim","map","h","slice","i","handleDeleteDataset","fileId","updatedDatasets","d","style","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","multiple","accept","onChange","marginBottom","disabled","idx","marginTop","width","background","borderRadius","key","colSpan","textAlign","color","_c","$RefreshReg$"],"sources":["d:/University/Group/ml-code-generator_v5/ml-code-generator_v5/src/components/DatasetPanel.jsx"],"sourcesContent":["import React from 'react';\r\nimport { uploadDataset, getDatasetPreview } from '../services/api';\r\n\r\nconst DatasetPanel = ({ datasetFiles, setDatasetFiles, selectedFile, setSelectedFile }) => {\r\n  const [filePreview, setFilePreview] = React.useState(null);\r\n  const [filePreviewMap, setFilePreviewMap] = React.useState({});\r\n  const [uploadType, setUploadType] = React.useState('file');\r\n  const [isUploading, setIsUploading] = React.useState(false);\r\n\r\n  // 处理文件上传\r\n  const handleFileChange = async (e) => {\r\n    const files = Array.from(e.target.files);\r\n    const allowedExts = ['CSV', 'TXT', 'JSON', 'MD'];\r\n    const filteredFiles = files.filter(file => {\r\n      const ext = file.name.split('.').pop().toUpperCase();\r\n      return allowedExts.includes(ext);\r\n    });\r\n    if (filteredFiles.length === 0) return;\r\n    setIsUploading(true);\r\n    try {\r\n      const uploadedFiles = [];\r\n      for (const file of filteredFiles) {\r\n        const localAnalysisMetadata = await analyzeFileContent(file);\r\n        const serverFile = await uploadDataset(file, {\r\n          type: 'training',\r\n          description: `Uploaded on ${new Date().toLocaleString()}`,\r\n          userId: 'user123',\r\n          metadata: {\r\n            rowCount: localAnalysisMetadata.rows,\r\n            columnCount: localAnalysisMetadata.columns,\r\n            features: localAnalysisMetadata.previewData.length > 0 ? Object.keys(localAnalysisMetadata.previewData[0]) : []\r\n          }\r\n        });\r\n        uploadedFiles.push(serverFile);\r\n      }\r\n      setDatasetFiles(uploadedFiles);\r\n      if (uploadedFiles.length > 0) {\r\n        handleFileSelect(uploadedFiles[uploadedFiles.length - 1]);\r\n      }\r\n    } catch (error) {\r\n      alert('File upload failed: ' + error.message);\r\n    } finally {\r\n      setIsUploading(false);\r\n    }\r\n  };\r\n\r\n  // 分析单个文件内容\r\n  const analyzeFileContent = async (file, callback) => {\r\n    const sizeInBytes = file.fileSize || file.size;\r\n    let sizeStr = '';\r\n    if (sizeInBytes < 1024) sizeStr = sizeInBytes + ' B';\r\n    else if (sizeInBytes < 1024 * 1024) sizeStr = (sizeInBytes / 1024).toFixed(2) + ' KB';\r\n    else if (sizeInBytes < 1024 * 1024 * 1024) sizeStr = (sizeInBytes / (1024 * 1024)).toFixed(2) + ' MB';\r\n    else sizeStr = (sizeInBytes / (1024 * 1024 * 1024)).toFixed(2) + ' GB';\r\n    const fileInfo = {\r\n      name: file.name,\r\n      size: sizeStr,\r\n      format: file.name.split('.').pop().toUpperCase(),\r\n      updateTime: new Date().toLocaleString(),\r\n    };\r\n    if (file.filePath) {\r\n      try {\r\n        const previewResult = await getDatasetPreview(file._id);\r\n        const { headers, data: previewData, totalRows } = previewResult;\r\n        const result = {\r\n          ...fileInfo,\r\n          rows: totalRows,\r\n          columns: headers.length,\r\n          missingRatio: 'N/A',\r\n          previewData: previewData\r\n        };\r\n        if (callback) callback(result);\r\n        return result;\r\n      } catch (error) {\r\n        const result = {\r\n          ...fileInfo,\r\n          rows: file.metadata?.rowCount || 0,\r\n          columns: file.metadata?.columnCount || 0,\r\n          missingRatio: '0%',\r\n          previewData: []\r\n        };\r\n        if (callback) callback(result);\r\n        return result;\r\n      }\r\n    }\r\n    return new Promise((resolve) => {\r\n      const reader = new FileReader();\r\n      reader.onload = (e) => {\r\n        const content = e.target.result;\r\n        const previewData = parseContentToPreview(content, fileInfo.format);\r\n        const rows = previewData.length;\r\n        const columns = previewData.length > 0 ? Object.keys(previewData[0]).length : 0;\r\n        let missingCount = 0;\r\n        let totalCount = 0;\r\n        previewData.forEach(row => {\r\n          Object.values(row).forEach(value => {\r\n            totalCount++;\r\n            if (!value) missingCount++;\r\n          });\r\n        });\r\n        const missingRatio = totalCount > 0 ? `${((missingCount / totalCount) * 100).toFixed(2)}%` : '0%';\r\n        const result = {\r\n          ...fileInfo,\r\n          rows,\r\n          columns,\r\n          missingRatio,\r\n          previewData\r\n        };\r\n        if (callback) callback(result);\r\n        resolve(result);\r\n      };\r\n      reader.onerror = () => {\r\n        const result = {\r\n          ...fileInfo,\r\n          rows: 0,\r\n          columns: 0,\r\n          missingRatio: '0%',\r\n          previewData: []\r\n        };\r\n        if (callback) callback(result);\r\n        resolve(result);\r\n      };\r\n      reader.readAsText(file);\r\n    });\r\n  };\r\n\r\n  // 解析内容为预览\r\n  const parseContentToPreview = (content, format) => {\r\n    if (format === 'CSV') {\r\n      const lines = content.split(/\\r?\\n/).filter(line => line.trim() !== '');\r\n      if (lines.length < 2) return [];\r\n      const headers = lines[0].split(',').map(h => h.trim());\r\n      return lines.slice(1).map(line => {\r\n        const values = line.split(',');\r\n        const row = {};\r\n        headers.forEach((h, i) => { row[h] = values[i]; });\r\n        return row;\r\n      });\r\n    }\r\n    // 可扩展支持JSON等\r\n    return [];\r\n  };\r\n\r\n  // 选择文件\r\n  const handleFileSelect = (file) => {\r\n    setSelectedFile(file);\r\n    if (file) {\r\n      analyzeFileContent(file, setFilePreview);\r\n    } else {\r\n      setFilePreview(null);\r\n    }\r\n  };\r\n\r\n  // 删除数据集\r\n  const handleDeleteDataset = (fileId) => {\r\n    const updatedDatasets = datasetFiles.filter(d => d._id !== fileId);\r\n    setDatasetFiles(updatedDatasets);\r\n    if (selectedFile && selectedFile._id === fileId) {\r\n      setSelectedFile(null);\r\n      setFilePreview(null);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{padding: 18}}>\r\n      <h3>数据集管理</h3>\r\n      <input\r\n        type=\"file\"\r\n        multiple\r\n        accept=\".csv,.txt,.json,.md\"\r\n        onChange={handleFileChange}\r\n        style={{ marginBottom: 12 }}\r\n        disabled={isUploading}\r\n      />\r\n      {datasetFiles.length > 0 && (\r\n        <select\r\n          onChange={e => handleFileSelect(datasetFiles[e.target.value])}\r\n          style={{ marginBottom: 12 }}\r\n        >\r\n          <option value=\"\">选择已上传文件</option>\r\n          {datasetFiles.map((file, idx) => (\r\n            <option key={file._id || file.name} value={idx}>{file.name}</option>\r\n          ))}\r\n        </select>\r\n      )}\r\n      {filePreview && (\r\n        <div style={{marginTop: 18}}>\r\n          <h4>文件预览：{filePreview.name}</h4>\r\n          <div>大小: {filePreview.size}</div>\r\n          <div>格式: {filePreview.format}</div>\r\n          <div>行数: {filePreview.rows}</div>\r\n          <div>列数: {filePreview.columns}</div>\r\n          <div>更新时间: {filePreview.updateTime}</div>\r\n          <div>缺失值比例: {filePreview.missingRatio}</div>\r\n          <table style={{marginTop: 12, width: '100%', background: '#f8f8f8', borderRadius: 6}}>\r\n            <thead>\r\n              <tr>\r\n                {filePreview.previewData && filePreview.previewData.length > 0 && Object.keys(filePreview.previewData[0]).map(key => (\r\n                  <th key={key}>{key}</th>\r\n                ))}\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {filePreview.previewData && filePreview.previewData.length > 0 ? filePreview.previewData.map((row, idx) => (\r\n                <tr key={idx}>\r\n                  {Object.keys(filePreview.previewData[0]).map(key => (\r\n                    <td key={key}>{row[key]}</td>\r\n                  ))}\r\n                </tr>\r\n              )) : (\r\n                <tr><td colSpan={10} style={{textAlign: 'center', color: '#aaa'}}>No data</td></tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DatasetPanel; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}